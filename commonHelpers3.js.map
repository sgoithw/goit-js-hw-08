{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash/throttle';\n\nconst FROM_STATE_KEY = 'feedback-form-state';\n\nconst form = document.querySelector('.feedback-form');\nconst formdData = localStorage.getItem(FROM_STATE_KEY);\n\nconst onInput = throttle(e => saveForm(e.currentTarget), 500);\n\nrestoreForm(form);\n\nform.addEventListener('input', onInput);\n\nform.addEventListener('submit', onSubmit);\n\n/**\n * Handles form on submit event\n *\n * @param {*} e\n */\nfunction onSubmit(e) {\n  e.preventDefault();\n  console.log(Object.fromEntries(new FormData(e.target).entries()));\n  e.target.reset();\n  localStorage.removeItem(FROM_STATE_KEY);\n}\n\n/**\n * Saves form data to localStorage\n * @param {*} form\n */\nfunction saveForm(form) {\n  if (form instanceof HTMLFormElement) {\n    const formData = new FormData(form);\n    localStorage.setItem(\n      FROM_STATE_KEY,\n      JSON.stringify(Object.fromEntries(formData.entries()))\n    );\n  }\n}\n\n/**\n * Restores form data from localStorage\n * @param {*} form\n */\nfunction restoreForm(form) {\n  try {\n    const savedData = localStorage.getItem(FROM_STATE_KEY);\n    const savedFormData = savedData ? JSON.parse(savedData) : null;\n    if (savedFormData) {\n      Object.keys(savedFormData).forEach(key => {\n        if (form[key]) {\n          form[key].value = savedFormData[key];\n        }\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":["FROM_STATE_KEY","form","onInput","throttle","e","saveForm","restoreForm","onSubmit","formData","savedData","savedFormData","key","error"],"mappings":"wIAEA,MAAMA,EAAiB,sBAEjBC,EAAO,SAAS,cAAc,gBAAgB,EAClC,aAAa,QAAQD,CAAc,EAErD,MAAME,EAAUC,EAASC,GAAKC,EAASD,EAAE,aAAa,EAAG,GAAG,EAE5DE,EAAYL,CAAI,EAEhBA,EAAK,iBAAiB,QAASC,CAAO,EAEtCD,EAAK,iBAAiB,SAAUM,CAAQ,EAOxC,SAASA,EAASH,EAAG,CACnBA,EAAE,eAAc,EAChB,QAAQ,IAAI,OAAO,YAAY,IAAI,SAASA,EAAE,MAAM,EAAE,QAAS,CAAA,CAAC,EAChEA,EAAE,OAAO,QACT,aAAa,WAAWJ,CAAc,CACxC,CAMA,SAASK,EAASJ,EAAM,CACtB,GAAIA,aAAgB,gBAAiB,CACnC,MAAMO,EAAW,IAAI,SAASP,CAAI,EAClC,aAAa,QACXD,EACA,KAAK,UAAU,OAAO,YAAYQ,EAAS,QAAO,CAAE,CAAC,CAC3D,CACG,CACH,CAMA,SAASF,EAAYL,EAAM,CACzB,GAAI,CACF,MAAMQ,EAAY,aAAa,QAAQT,CAAc,EAC/CU,EAAgBD,EAAY,KAAK,MAAMA,CAAS,EAAI,KACtDC,GACF,OAAO,KAAKA,CAAa,EAAE,QAAQC,GAAO,CACpCV,EAAKU,KACPV,EAAKU,GAAK,MAAQD,EAAcC,GAE1C,CAAO,CAEJ,OAAQC,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH"}